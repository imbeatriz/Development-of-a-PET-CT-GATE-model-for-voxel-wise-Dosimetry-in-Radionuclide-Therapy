# Get the segmentation node from 3D Slicer
# Replace "segmentations_Name" with the actual name of your segmentation node in the scene
segmentationNode = slicer.util.getNode("segmentations_Name") 

# Retrieve the segmentation object from the selected node
segmentation = segmentationNode.GetSegmentation()

# Define the output path + name for the text file that will store
# the mapping between segment indices and their names
labelmapPath = "/home/administrator/Patient-SpecificPhantom/Name_for_segmentation_labels_file.txt"

# Write each segment index and name to the output file (1-based numbering)
with open(labelmapPath, "w") as f:
    for i in range(segmentation.GetNumberOfSegments()):
        segmentId = segmentation.GetNthSegmentID(i) 
        segment = segmentation.GetSegment(segmentId)
        name = segment.GetName()
        f.write(f"{i + 1} {name}\n")

print(f"Label map text file saved to: {labelmapPath}")
